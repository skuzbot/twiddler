<!DOCTYPE html>
<html>

  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>

  <body>

    <header>
      <h1 class="title">Twidder</h1>
    </header>

    <section class="newTwids">
    	<button id="newTwids">Check for new Twids</button>
      <!-- <button id="stop">Stop</button> -->
      <button id="show-all">Show All Users</button>
    </section>

   	<div class="twidContainer"></div>

	    <script>

	      $(document).ready(function(){
	        var $body = $('body');
	        var $newTwids = $('.newTwids');
	        var $twidContainer = $('.twidContainer');
	        window.i = 1;
	        window.totalTwids = streams.home.length;
	        

	        //recieves new twids from data_gen
	        function getNewTwid(index) {
            var tweet = streams.home[index];
            var $tweet = $('<button class="tweet-button twid"></button>');
            var time = tweet.created_at;
            var $time = $('<small class="time"></small>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $tweet.addClass(tweet.user);
            $time.text('submitted at ' + time);
            $tweet.prependTo($twidContainer);
            $time.appendTo($tweet);
            window.i++;
            
            console.log(i);
	        };

		      
		      //hide non-matching users functions

		      //user: shawndrost
		      $('.twidContainer').on('click', '.shawndrost', function() {
		    		$(this).siblings().filter(':not(.shawndrost)').hide();
		    		clearInterval(start);
		      });



		      //user: sharksforcheap
		      $('.twidContainer').on('click', '.sharksforcheap', function() {
		    		$(this).siblings().filter(':not(.sharksforcheap)').hide();
		    		clearInterval(start);
		      });

		      //user: mracus
		      $('.twidContainer').on('click', '.mracus', function() {
		    		$(this).siblings().filter(':not(.mracus)').hide();
		    		clearInterval(start);
		      });

		      //user: douglascalhoun
		      $('.twidContainer').on('click', '.douglascalhoun', function() {
		    		$(this).siblings().filter(':not(.douglascalhoun)').hide();
		    		clearInterval(start);
		      });


		      //
	        // var start = setInterval(function() {
	        //     getNewTwid(i);
	        //  }, 500);
		   
	        var checkButton =document.getElementById("newTwids");
	        checkButton.onclick = startNew;
	        function startNew() {
	        	$('.twid').show();
	        	var diff = streams.home.length - i;
						for(j = diff; j < streams.home.length; j++)	{
							if (streams.home.length > i) {
								getNewTwid(j);
							}
							
						}      	
	        }

	        // var stopButton = document.getElementById("stop");
	        // stopButton.onclick = stop;
	        // function stop() { 
	        //   clearInterval(start);
	        // }

	        var showButton = document.getElementById("show-all");
	        showButton.onclick = showAll;
	        function showAll() {
	        	$('.twid').show();
	        }

	      });

	    </script>
    
  </body>
</html>


